<!--@layout(/layout/basic/layout.html)-->
<!--@css(/css/module/member/edit.css)-->

<!-- iOS에서는 position:fixed 버그가 있음, 적용하는 사이트에 맞게 position:absolute 등을 이용하여 top,left값 조정 필요 -->
<div id="layer" style="display:none;position:fixed;overflow:hidden;z-index:1;-webkit-overflow-scrolling:touch;background-color:#fff;">
<img src="//t1.daumcdn.net/localimg/localimages/07/postcode/320/close.png" id="btnCloseLayer" style="cursor:pointer;position:absolute;right:-3px;top:-3px;z-index:1" onclick="closeDaumPostcode()" alt="닫기 버튼">
</div>

<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
<script>
    // 우편번호 찾기 화면을 넣을 element
    var element_layer = document.getElementById('layer');

    function closeDaumPostcode() {
        // iframe을 넣은 element를 안보이게 한다.
        element_layer.style.display = 'none';
    }

    function sample4_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var fullAddr = data.address; // 최종 주소 변수
                var extraAddr = ''; // 조합형 주소 변수

                // 기본 주소가 도로명 타입일때 조합한다.
                if(data.addressType === 'R'){
                    //법정동명이 있을 경우 추가한다.
                    if(data.bname !== ''){
                        extraAddr += data.bname;
                    }
                    // 건물명이 있을 경우 추가한다.
                    if(data.buildingName !== ''){
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
                    fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');
                }

                // 우편번호와 주소 정보를 해당 필드에 넣는다.
                document.getElementById('postcode1').value = data.zonecode; //5자리 새우편번호 사용
                document.getElementById('addr1').value = fullRoadAddr;
                document.getElementById('addr2').value = data.jibunAddress;

                // iframe을 넣은 element를 안보이게 한다.
                // (autoClose:false 기능을 이용한다면, 아래 코드를 제거해야 화면에서 사라지지 않는다.)
                element_layer.style.display = 'none';
            },
            width : '100%',
            height : '100%',
            maxSuggestItems : 5
        }).embed(element_layer);

        // iframe을 넣은 element를 보이게 한다.
        element_layer.style.display = 'block';

        // iframe을 넣은 element의 위치를 화면의 가운데로 이동시킨다.
        initLayerPosition();
    }

    // 브라우저의 크기 변경에 따라 레이어를 가운데로 이동시키고자 하실때에는
    // resize이벤트나, orientationchange이벤트를 이용하여 값이 변경될때마다 아래 함수를 실행 시켜 주시거나,
    // 직접 element_layer의 top,left값을 수정해 주시면 됩니다.
    function initLayerPosition(){
        var width = 320; //우편번호서비스가 들어갈 element의 width
        var height = 400; //우편번호서비스가 들어갈 element의 height
        var borderWidth = 2; //샘플에서 사용하는 border의 두께

        // 위에서 선언한 값들을 실제 element에 넣는다.
        element_layer.style.width = width + 'px';
        element_layer.style.height = height + 'px';
        element_layer.style.border = borderWidth + 'px solid';
        // 실행되는 순간의 화면 너비와 높이 값을 가져와서 중앙에 뜰 수 있도록 위치를 계산한다.
        element_layer.style.left = (((window.innerWidth || document.documentElement.clientWidth) - width)/2 - borderWidth) + 'px';
        element_layer.style.top = (((window.innerHeight || document.documentElement.clientHeight) - height)/2 - borderWidth) + 'px';
    }
</script>

<div class="container">
    <div class="p40"></div>
    <h1 class="titleH1">회원정보 수정</h1>
    <div class="p20 mp0"></div>
    <div class="tab_myshop_menu" module="myshop_main">
        <ul>
            <!--@import(/layout/basic/myshop_menu.html)-->
        </ul>    
    </div>
    <div class="p40"></div>

<div module="member_edit">
    <div class="tableWrap">
        <table>
            <tbody>
                <tr>
                    <th scope="row"><div class="ess"></div>아이디</th>
                    <td>
                        {$form.member_id}
                        {$form.user_id_dupl} (영문소문자/숫자, 4~16자)
                    </td>
                </tr>
                <tr>
                    <th scope="row"><div class="ess"></div>새로운 <span class="textDivider"></span>{$display_passwd_title}</th>
                    <td>{$form.passwd} {$passwd_type_desc}</td>
                </tr>
                <tr class="{$display_is_none_certification|display}">
                    <th scope="row"><div class="ess"></div>새로운 <span class="textDivider"></span>비밀번호 확인</th>
                    <td>{$form.user_passwd_confirm} <span id="{$pwConfirmMsg_id}"></span></td>
                </tr>
                <tr style="display:{$display_name}">
                    <th scope="row" id="{$name_title}"><div class="ess"></div>이름</th>
                    <td>{$form.name}</td>
                </tr>
                <tr class="{$display_addr|display}">
                    <th scope="row"><div class="ess"></div>주소</th>
                    <td>
                        {$form.postcode1}
                        <a href="#" onclick="sample4_execDaumPostcode()" class="buttonA"><label>우편번호</label></a><br />
                        {$form.addr1} 기본주소<br />
                        {$form.addr2} 나머지주소 {$address2_desc}
                    </td>
                </tr>
                <tr class="{$display_mobile|display}">
                    <th scope="row"><div class="ess"></div>휴대전화</th>
                    <td>{$form.mobile}</td>
                </tr>
                <tr>
                    <th scope="row"><div class="ess"></div>이메일</th>
                        <td>
                            {$form.email} <span id="{$emailMsg_id}"></span>
                            <p class="{$display_is_email_auth_info|display}">이메일 주소 변경 시 로그아웃 후 재인증을 하셔야만 로그인이 가능합니다.<br />인증 메일은 24시간 동안 유효하며, 유효 시간이 만료된 후에는 가입 정보로 로그인 하셔서 재발송 요청을 해주시기 바랍니다.</p>
                        </td>
                    </tr>
                    <tr class="{$display_is_news_mail|display}">
                        <th scope="row">이메일 수신여부</th>
                        <td>{$form.is_news_mail}<p>쇼핑몰에서 제공하는 유익한 이벤트 소식을 이메일로 받으실 수 있습니다.</p></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div module="member_editInformation">
            <h3>제3자 정보제공 동의현황</h3>
            <div class="ec-base-table typeList">
                <table border="1" summary="">
                    <caption>제3자 정보제공 동의현황</caption>
                    <colgroup>
                        <col style="width:auto;" />
                        <col style="width:15%;" />
                        <col style="width:25%;" />
                        <col style="width:15%;" />
                        <col style="width:12%;" />
                        <col style="width:12%;" />
                        <col style="width:12%;" />
                    </colgroup>
                    <thead>
                        <tr>
                            <th scope="col">제공서비스</th>
                            <th scope="col">제공받는 자</th>
                            <th scope="col">개인정보 이용 목적</th>
                            <th scope="col">제공하는<br />개인정보 항목</th>
                            <th scope="col">보유기간</th>
                            <th scope="col">동의여부</th>
                            <th scope="col">동의/철회</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{$app_name}<br /><span class="line">({$sa_av_version})</span></td>
                            <td>{$perinfo_offer}</td>
                            <td>{$perinfo_purpose}</td>
                            <td>{$perinfo_item}</td>
                            <td class="center">{$perinfo_retain}</td>
                            <td class="center">{$perinfo_status}</td>
                            <td class="center">{$perinfo_button}</td>
                        </tr>
                        <tr>
                            <td>{$app_name}<br /><span class="line">({$sa_av_version})</span></td>
                            <td>{$perinfo_offer}</td>
                            <td>{$perinfo_purpose}</td>
                            <td>{$perinfo_item}</td>
                            <td class="center">{$perinfo_retain}</td>
                            <td class="center">{$perinfo_status}</td>
                            <td class="center">{$perinfo_button}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="info">- 정보제공에 대한 동의여부를 변경할 수 있으며, 철회 시 일부 서비스 사용이 불가할 수 있습니다.</p>
        </div>
    
        <div module="member_editConsignment">
            <h3>처리위탁 동의현황</h3>
            <div class="ec-base-table typeList">
                <table border="1" summary="">
                    <caption>처리위탁 동의현황</caption>
                    <colgroup>
                        <col style="width:auto;" />
                        <col style="width:20%;" />
                        <col style="width:30%;" />
                        <col style="width:12%;" />
                        <col style="width:12%;" />
                        <col style="width:12%;" />
                    </colgroup>
                    <thead>
                        <tr>
                            <th scope="col">제공서비스</th>
                            <th scope="col">위탁받은 자</th>
                            <th scope="col">위탁업무의 내용</th>
                            <th scope="col">보유기간</th>
                            <th scope="col">동의여부</th>
                            <th scope="col">동의/철회</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{$app_name}<br /><span class="line">({$sa_av_version})</span></td>
                            <td>{$trust_target}</td>
                            <td>{$trust_work}</td>
                            <td class="center">{$trust_retain}</td>
                            <td class="center">{$trust_status}</td>
                            <td class="center">{$trust_button}</td>
                        </tr>
                        <tr>
                            <td>{$app_name}<br /><span class="line">({$sa_av_version})</span></td>
                            <td>{$trust_target}</td>
                            <td>{$trust_work}</td>
                            <td class="center">{$trust_retain}</td>
                            <td class="center">{$trust_status}</td>
                            <td class="center">{$trust_button}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="info">- 처리위탁에 대한 동의여부를 변경할 수 있으며, 철회 시 일부 서비스 사용이 불가할 수 있습니다.</p>
        </div>
    
        <div class="{$display_information|display}">
            <h3>개인정보 제3자 제공 동의(선택)</h3>
            <div class="ec-base-box typeThinBg agreeArea">
                <div class="content">
                    {$information_desc}
                </div>
                <p class="check"><span>개인정보 제3자 제공에 동의하십니까?</span> {$form.agree_information_check}</p>
            </div>
        </div>
    
        <div class="{$display_consignment|display}">
            <h3>개인정보 처리 위탁 동의(선택)</h3>
            <div class="ec-base-box typeThinBg agreeArea">
                <div class="content">
                    {$consignment_desc}
                </div>
                <p class="check"><span>개인정보 처리 위탁에 동의하십니까?</span> {$form.agree_consignment_check}</p>
            </div>
        </div>
        
        <div class="p20"></div>
    
        <div class="tableBtnArea">
            <a href="#none" onclick="{$action_func_del}"  class="btnNormal btn3">회원탈퇴</a>
            <a href="#none" onclick="{$action_func_join}" class="btnBasic btn3">회원정보수정</a>
            
        </div>
    </div>
</div>   

<div class="p80"></div><div class="p40"></div><div class="p10"></div>